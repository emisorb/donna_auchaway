#!/usr/bin/env ruby

# Cargar punto de inicio.
require_relative '../boot'

c = Donna::Config.instance

# TODO, Cambiar esto para que funcione a la vez en discord y telegram.
begin
  if c.telegram['key'].nil?
    raise ArgumentError.new('Falta configurar la API key de Telegram')
  else
    Telegram::Bot.configure do |config|
      config.adapter = c.telegram['adapter'].to_sym
    end
  end

  # Hey! Listen!
  Donna::Bot.new(c).run!
rescue ArgumentError, Telegram::Bot::Exceptions::ResponseError => e
  c.log.error e
end
